/* datalayer-helper (2024-04-24T19:29:36.044Z). Copyright 2024 Toni Arndt. This work is licensed under the terms of the MIT license. For a copy, see <https://github.com/toniarndt/datalayer-helper/blob/main/LICENSE>. */
"use strict";var d=(()=>{var d=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var N=Object.prototype.hasOwnProperty;var h=(e,o)=>{for(var t in o)d(e,t,{get:o[t],enumerable:!0})},C=(e,o,t,n)=>{if(o&&typeof o=="object"||typeof o=="function")for(let a of k(o))!N.call(e,a)&&a!==t&&d(e,a,{get:()=>o[a],enumerable:!(n=v(o,a))||n.enumerable});return e};var D=e=>C(d({},"__esModule",{value:!0}),e);var B={};h(B,{clearDatalayer:()=>P,cloneDatalayer:()=>I,combine:()=>T,decodeBase64:()=>y,deleteCookie:()=>L,encodeBase64:()=>b,flattenDatalayer:()=>E,fromString:()=>F,getCookie:()=>S,getCookies:()=>p,getDatalayer:()=>A,getQueryParameter:()=>U,getValue:()=>j,log:()=>r,setCookie:()=>_,setDebug:()=>w,setValue:()=>R,toString:()=>V,version:()=>$});var $="1.0.0";function m(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(n=>m(n));let o={};for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(o[t]=m(e[t]));return o}function u(e,o=""){let t={};return Object.keys(e).forEach(n=>{typeof e[n]=="object"&&e[n]!==null?Object.assign(t,u(e[n],o+n+"_")):t[o+n]=e[n]}),t}function b(e){return btoa(unescape(encodeURIComponent(e)))}function y(e){return decodeURIComponent(escape(atob(e)))}var g=!1;function w(e){g!=e&&(g=e,g==!0?r({message:"The debug mode has been activated",functionName:"setDebug",level:"log"}):r({message:"The debug mode has been deactivated",functionName:"setDebug",level:"log"}))}var O="\u26A1 datalayer-helper";function r(e){if(g==!0){let o=console[e.level],t=`${O} @${e.functionName}`;e.message!=null&&(t+=`: ${e.message}`),o.apply(console,e.args==null?[t]:[t,e.args])}}function R(e,o){let t=window._datalayer,n=e.split(".");for(let a=0;a<n.length;a++){let i=n[a];a<n.length-1?(t[i]={},t=t[i]):(t[i]=o,r({message:`'${e}' = '${o}'`,functionName:"setValue",level:"log"}))}}function j(e){let o=window._datalayer,t=e.split(".");for(let n=0;n<t.length;n++){let a=t[n];if(Object.hasOwn(o,a)==!1)break;if(typeof o[a]=="object")o=o[a];else return r({message:`'${e}' = '${o[a]}'`,functionName:"getValue",level:"log"}),o[a]}return r({message:`Namespace '${e}' is undefined`,functionName:"getValue",level:"warn"}),null}function T(e,o,t=",",n=":"){let a=[];for(let i=0;i<e.length;i++)for(let l=0;l<o.length;l++){let c=e[i].trim().replaceAll(n,"\u203A"),f=o[l].trim().replaceAll(n,"\u203A");a.push(`${c}${n}${f}`)}return r({message:null,functionName:"combination",level:"log",args:a.join(t)}),a.join(t)}function _(e,o,t=1800,n="/"){let a=new Date;a.setTime(a.getTime()+t*1e3);let i="expires="+a.toUTCString();document.cookie=`${e}=${o};${i};path=${n}`,r({message:`Cookie: '${e}' = '${o}' | Expires: ${t}s | Path: ${n}`,functionName:"setCookie",level:"log"})}function p(){let e=Object.assign({},...decodeURI(document.cookie).split(";").map(o=>{let[t,n]=o.split("=");return t.trimStart()==""?null:{[t.trimStart()]:n}}));return Object.keys(e).length==0?r({message:"No cookies are set",functionName:"getCookies",level:"log"}):r({message:null,functionName:"getCookies",level:"log",args:e}),e}function S(e){let o=p();return o!=null&&e in o?(r({message:`'${e}' = '${o[e]}'`,functionName:"getCookie",level:"log"}),o[e]):(r({message:`Cookie '${e}' not found`,functionName:"getCookie",level:"warn"}),null)}function L(e){let o=new Date;o.setTime(o.getTime());let t="expires="+o.toUTCString();document.cookie=`${e}=;${t};path=/`,r({message:`Cookie '${e}' deleted`,functionName:"deleteCookie",level:"log"})}function U(e=document.URL){let o=[];if(e.indexOf("?")!=-1){let t=e.split("?");if(t.length>=1){let n=t[1].split("&");for(let a=0;a<n.length;a++){let[i,l]=n[a].split("="),c=decodeURIComponent(i),f=typeof l>"u"?"":decodeURIComponent(l);o.push([c,f])}}}return o.length==0?r({message:"No query parameters passed",functionName:"getQueryParameter",level:"warn"}):r({message:null,functionName:"getQueryParameter",level:"log",args:o}),o}function A(){return r({functionName:"getDatalayer",message:"Returns the datalayer as an object",level:"log"}),window._datalayer}function P(){for(let e of Object.getOwnPropertyNames(window._datalayer))delete window._datalayer[e];r({functionName:"clearDatalayer",message:"Datalayer object cleared",level:"log"})}function I(e){let o=m(e);return r({functionName:"cloneDatalayer",message:"Cloned datalayer object was returned",level:"log"}),o}function E(e){let o=u(e);return r({functionName:"flattenDatalayer",message:"Flattened datalayer object was returned",level:"log"}),o}function F(e){try{window._datalayer=JSON.parse(e),r({functionName:"fromString",message:"Datalayer created from string",level:"log"})}catch{r({functionName:"fromString",message:"Datalayer object could not be created from the string",level:"error"})}}function V(){return r({functionName:"toString",message:"Returns the datalayer as a string",level:"log"}),JSON.stringify(window._datalayer)}window._datalayer||(window._datalayer={});return D(B);})();

/* datalayer-helper (2024-04-27T13:02:16.553Z). Copyright 2024 Toni Arndt. This work is licensed under the terms of the MIT license. For a copy, see <https://github.com/toniarndt/datalayer-helper/blob/main/LICENSE>. */
"use strict";var d=(()=>{var d=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames;var N=Object.prototype.hasOwnProperty;var k=(e,o)=>{for(var r in o)d(e,r,{get:o[r],enumerable:!0})},h=(e,o,r,n)=>{if(o&&typeof o=="object"||typeof o=="function")for(let a of D(o))!N.call(e,a)&&a!==r&&d(e,a,{get:()=>o[a],enumerable:!(n=v(o,a))||n.enumerable});return e};var C=e=>h(d({},"__esModule",{value:!0}),e);var Q={};k(Q,{builddate:()=>$,clearDatalayer:()=>P,cloneDatalayer:()=>I,combine:()=>_,decodeBase64:()=>y,deleteCookie:()=>T,encodeBase64:()=>b,flattenDatalayer:()=>E,fromString:()=>F,getCookie:()=>S,getCookies:()=>p,getDatalayer:()=>A,getQueryParameters:()=>U,getValue:()=>R,log:()=>t,setCookie:()=>L,setDebug:()=>w,setValue:()=>O,toString:()=>V,useDatalayer:()=>B});var $="2024-04-27T13:02:16.553Z";function m(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(n=>m(n));let o={};for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=m(e[r]));return o}function u(e,o=""){let r={};return Object.keys(e).forEach(n=>{typeof e[n]=="object"&&e[n]!==null?Object.assign(r,u(e[n],o+n+"_")):r[o+n]=e[n]}),r}function b(e){return btoa(unescape(encodeURIComponent(e)))}function y(e){return decodeURIComponent(escape(atob(e)))}var g=!1;function w(e){g!=e&&(g=e,g==!0?t({message:"The debug mode has been activated",functionName:"setDebug",level:"log"}):t({message:"The debug mode has been deactivated",functionName:"setDebug",level:"log"}))}var j="\u26A1 datalayer-helper";function t(e){if(g==!0){let o=console[e.level],r=`${j} @${e.functionName}`;e.message!=null&&(r+=`: ${e.message}`),o.apply(console,e.args==null?[r]:[r,e.args])}}function O(e,o){let r=window._datalayer,n=e.split(".");for(let a=0;a<n.length;a++){let l=n[a];a<n.length-1?(r[l]={},r=r[l]):(r[l]=o,t({message:`'${e}' = '${o}'`,functionName:"setValue",level:"log"}))}}function R(e){let o=window._datalayer,r=e.split(".");for(let n=0;n<r.length;n++){let a=r[n];if(Object.hasOwn(o,a)==!1)break;if(typeof o[a]=="object")o=o[a];else return t({message:`'${e}' = '${o[a]}'`,functionName:"getValue",level:"log"}),o[a]}return t({message:`Namespace '${e}' is undefined`,functionName:"getValue",level:"warn"}),null}function _(e,o,r=",",n=":"){let a=[];for(let l=0;l<e.length;l++)for(let i=0;i<o.length;i++){let c=e[l].trim().replaceAll(n,"\u203A"),f=o[i].trim().replaceAll(n,"\u203A");a.push(`${c}${n}${f}`)}return t({message:null,functionName:"combination",level:"log",args:a.join(r)}),a.join(r)}function L(e,o,r=1800,n="/"){let a=new Date;a.setTime(a.getTime()+r*1e3);let l="expires="+a.toUTCString();document.cookie=`${e}=${o};${l};path=${n}`,t({message:`Cookie: '${e}' = '${o}' | Expires: ${r}s | Path: ${n}`,functionName:"setCookie",level:"log"})}function p(){let e=Object.assign({},...decodeURI(document.cookie).split(";").map(o=>{let[r,n]=o.split("=");return r.trimStart()==""?null:{[r.trimStart()]:n}}));return Object.keys(e).length==0?t({message:"No cookies are set",functionName:"getCookies",level:"log"}):t({message:null,functionName:"getCookies",level:"log",args:e}),e}function S(e){let o=p();return o!=null&&e in o?(t({message:`'${e}' = '${o[e]}'`,functionName:"getCookie",level:"log"}),o[e]):(t({message:`Cookie '${e}' not found`,functionName:"getCookie",level:"warn"}),null)}function T(e){let o=new Date;o.setTime(o.getTime());let r="expires="+o.toUTCString();document.cookie=`${e}=;${r};path=/`,t({message:`Cookie '${e}' deleted`,functionName:"deleteCookie",level:"log"})}function U(e=document.URL){let o=[];if(e.indexOf("?")!=-1){let r=e.split("?");if(r.length>=1){let n=r[1].split("&");for(let a=0;a<n.length;a++){let[l,i]=n[a].split("="),c=decodeURIComponent(l),f=typeof i>"u"?"":decodeURIComponent(i);o.push([c,f])}}}return o.length==0?t({message:"No query parameters passed",functionName:"getQueryParameter",level:"warn"}):t({message:null,functionName:"getQueryParameter",level:"log",args:o}),o}function A(){return t({functionName:"getDatalayer",message:"Returns the datalayer as an object",level:"log"}),window._datalayer}function P(){for(let e of Object.getOwnPropertyNames(window._datalayer))delete window._datalayer[e];t({functionName:"clearDatalayer",message:"Datalayer object cleared",level:"log"})}function I(e){let o=m(e);return t({functionName:"cloneDatalayer",message:"Cloned datalayer object was returned",level:"log"}),o}function E(e){let o=u(e);return t({functionName:"flattenDatalayer",message:"Flattened datalayer object was returned",level:"log"}),o}function F(e){try{window._datalayer=JSON.parse(e),t({functionName:"fromString",message:"Datalayer created from string",level:"log"})}catch{t({functionName:"fromString",message:"Datalayer object could not be created from the string",level:"error"})}}function V(){return t({functionName:"toString",message:"Returns the datalayer as a string",level:"log"}),JSON.stringify(window._datalayer)}function B(e){e==null?(window._datalayer={},t({functionName:"useDatalayer",message:"Standard global datalayer object has been reset and is now used",level:"log"})):typeof e=="object"?(window._datalayer=e,t({functionName:"useDatalayer",message:"Custom global datalayer object is now used",level:"log"})):t({functionName:"useDatalayer",message:"Custom datalayer object cannot be used because no object was transferred",level:"error"})}window._datalayer||(window._datalayer={});return C(Q);})();

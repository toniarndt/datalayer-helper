/* datalayer-helper (2024-05-05T19:25:51.542Z). Copyright 2024 Toni Arndt. This work is licensed under the terms of the MIT license. For a copy, see <https://github.com/toniarndt/datalayer-helper/blob/main/LICENSE>. */
"use strict";var d=(()=>{var d=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var k=(e,t)=>{for(var o in t)d(e,o,{get:t[o],enumerable:!0})},C=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of D(t))!h.call(e,a)&&a!==o&&d(e,a,{get:()=>t[a],enumerable:!(n=N(t,a))||n.enumerable});return e};var $=e=>C(d({},"__esModule",{value:!0}),e);var J={};k(J,{buildDate:()=>j,clearDatalayer:()=>Q,cloneDatalayer:()=>E,combine:()=>L,decodeBase64:()=>y,deleteCookie:()=>U,encodeBase64:()=>b,flattenDatalayer:()=>F,fromString:()=>V,getCookie:()=>T,getCookies:()=>p,getDatalayer:()=>A,getQueryParameter:()=>P,getQueryParameters:()=>I,getValue:()=>_,log:()=>r,setCookie:()=>S,setDebug:()=>w,setValue:()=>O,toString:()=>q,useDatalayer:()=>B});var j="2024-05-05T19:25:51.542Z";function f(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(n=>f(n));let t={};for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=f(e[o]));return t}function u(e,t=""){let o={};return Object.keys(e).forEach(n=>{typeof e[n]=="object"&&e[n]!==null?Object.assign(o,u(e[n],t+n+"_")):o[t+n]=e[n]}),o}function b(e){return btoa(unescape(encodeURIComponent(e)))}function y(e){return decodeURIComponent(escape(atob(e)))}var c=!1;function w(e){c!=e&&(c=e,c==!0?r({message:"The debug mode has been activated",functionName:"setDebug",level:"log"}):r({message:"The debug mode has been deactivated",functionName:"setDebug",level:"log"}))}var R="\u26A1 datalayer-helper";function r(e){if(c==!0){let t=console[e.level],o=`${R} @${e.functionName}`;e.message!=null&&(o+=`: ${e.message}`),t.apply(console,e.args==null?[o]:[o,e.args])}}function O(e,t){let o=window._datalayer,n=e.split(".");for(let a=0;a<n.length;a++){let i=n[a];a<n.length-1?(o[i]={},o=o[i]):(o[i]=t,r({message:`'${e}' = '${t}'`,functionName:"setValue",level:"log"}))}}function _(e){let t=window._datalayer,o=e.split(".");for(let n=0;n<o.length;n++){let a=o[n];if(Object.hasOwn(t,a)==!1)break;if(typeof t[a]=="object")t=t[a];else return r({message:`'${e}' = '${t[a]}'`,functionName:"getValue",level:"log"}),t[a]}return r({message:`Namespace '${e}' is undefined`,functionName:"getValue",level:"warn"}),null}function L(e,t,o=",",n=":"){let a=[];for(let i=0;i<e.length;i++)for(let l=0;l<t.length;l++){let g=e[i].trim().replaceAll(n,"\u203A"),m=t[l].trim().replaceAll(n,"\u203A");a.push(`${g}${n}${m}`)}return r({message:null,functionName:"combination",level:"log",args:a.join(o)}),a.join(o)}function S(e,t,o=1800,n="/"){let a=new Date;a.setTime(a.getTime()+o*1e3);let i="expires="+a.toUTCString();document.cookie=`${e}=${t};${i};path=${n}`,r({message:`Cookie: '${e}' = '${t}' | Expires: ${o}s | Path: ${n}`,functionName:"setCookie",level:"log"})}function p(){let e=Object.assign({},...decodeURI(document.cookie).split(";").map(t=>{let[o,n]=t.split("=");return o.trimStart()==""?null:{[o.trimStart()]:n}}));return Object.keys(e).length==0?r({message:"No cookies are set",functionName:"getCookies",level:"log"}):r({message:null,functionName:"getCookies",level:"log",args:e}),e}function T(e){let t=p();return t!=null&&e in t?(r({message:`'${e}' = '${t[e]}'`,functionName:"getCookie",level:"log"}),t[e]):(r({message:`Cookie '${e}' not found`,functionName:"getCookie",level:"warn"}),null)}function U(e){let t=new Date;t.setTime(t.getTime());let o="expires="+t.toUTCString();document.cookie=`${e}=;${o};path=/`,r({message:`Cookie '${e}' deleted`,functionName:"deleteCookie",level:"log"})}function P(e,t=document.URL){let o=[];if(t.indexOf("?")!=-1){let n=t.split("?");if(n.length>=1){let a=n[1].split("&");for(let i=0;i<a.length;i++){let[l,g]=a[i].split("="),m=decodeURIComponent(l);if(e!=m)continue;let v=typeof g>"u"?"":decodeURIComponent(g);o.push(v)}}}return o.length==0?(r({message:`No query parameters passed for the key "${e}"`,functionName:"getQueryParameter",level:"warn",args:o}),[]):(r({message:`Key: "${e}"`,functionName:"getQueryParameter",level:"log",args:o}),o)}function I(e=document.URL){let t=[];if(e.indexOf("?")!=-1){let o=e.split("?");if(o.length>=1){let n=o[1].split("&");for(let a=0;a<n.length;a++){let[i,l]=n[a].split("="),g=decodeURIComponent(i),m=typeof l>"u"?"":decodeURIComponent(l);t.push([g,m])}}}return t.length==0?r({message:"No query parameters passed",functionName:"getQueryParameters",level:"warn"}):r({message:null,functionName:"getQueryParameters",level:"log",args:t}),t}function A(){return r({functionName:"getDatalayer",message:"Returns the datalayer as an object",level:"log"}),window._datalayer}function Q(){for(let e of Object.getOwnPropertyNames(window._datalayer))delete window._datalayer[e];r({functionName:"clearDatalayer",message:"Datalayer object cleared",level:"log"})}function E(e){let t=f(e);return r({functionName:"cloneDatalayer",message:"Cloned datalayer object was returned",level:"log"}),t}function F(e){let t=u(e);return r({functionName:"flattenDatalayer",message:"Flattened datalayer object was returned",level:"log"}),t}function V(e){try{window._datalayer=JSON.parse(e),r({functionName:"fromString",message:"Datalayer created from string",level:"log"})}catch{r({functionName:"fromString",message:"Datalayer object could not be created from the string",level:"error"})}}function q(){return r({functionName:"toString",message:"Returns the datalayer as a string",level:"log"}),JSON.stringify(window._datalayer)}function B(e){e==null?(window._datalayer={},r({functionName:"useDatalayer",message:"Standard global datalayer object has been reset and is now used",level:"log"})):typeof e=="object"?(window._datalayer=e,r({functionName:"useDatalayer",message:"Custom global datalayer object is now used",level:"log"})):r({functionName:"useDatalayer",message:"Custom datalayer object cannot be used because no object was transferred",level:"error"})}window._datalayer||(window._datalayer={});return $(J);})();
